<!DOCTYPE html>
<html>
<head>
    <title>Happy 22nd Birthday! üíñ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #FFF5F7, #FFE4E9);
            color: #8A4B75;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        h1 {
            color: #FF6B6B;
            margin: 20px 0;
            font-size: 2.5rem;
        }
        
        .orbs {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin: 30px 0;
        }
        
        @media (max-width: 600px) {
            .orbs { grid-template-columns: repeat(4, 1fr); }
        }
        
        .orb {
            width: 50px;
            height: 50px;
            background: linear-gradient(145deg, #FFB6C1, #FF6B6B);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin: 0 auto;
            transition: 0.3s;
            border: 3px solid white;
        }
        
        .orb:hover { transform: scale(1.1); }
        .orb.collected { background: #32CD32; opacity: 0.7; }
        
        .counter {
            font-size: 1.5rem;
            color: #FF6B6B;
            margin: 20px 0;
        }
        
        /* === FIXED PHOTO POPUP === */
        .popup {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .popup-content {
            background: white;
            padding: 20px;
            border-radius: 15px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* === INI YANG DIPERBAIKI === */
        .photo-container {
            width: 100%;
            max-height: 60vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f8f8f8;
            border-radius: 10px;
            margin-bottom: 20px;
            padding: 15px;
        }
        
        .memory-photo {
            max-width: 100%;
            max-height: 55vh;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
            display: block;
        }
        
        /* Untuk portrait photos */
        .memory-photo.portrait {
            max-height: 65vh;
            width: auto;
        }
        
        /* Untuk landscape photos */
        .memory-photo.landscape {
            max-width: 100%;
            height: auto;
        }
        
        .close-btn {
            background: #FF6B6B;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 1rem;
        }
        
        .photo-info {
            text-align: left;
            padding: 0 10px;
        }
        
        .photo-title {
            color: #FF6B6B;
            margin: 15px 0 10px;
            font-size: 1.4rem;
        }
        
        .photo-desc {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .nav-btn {
            background: #FFB6C1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .nav-btn:hover {
            background: #FF6B6B;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÇ Happy 22nd Birthday! üíñ</h1>
        <p>Untuk kekasihku tercinta</p>
        
        <div class="counter">
            Collected: <span id="count">0</span>/22
        </div>
        
        <div class="orbs" id="orbs">
            <!-- Orbs akan dibuat -->
        </div>
        
        <p style="margin-top: 30px; color: #666;">
            Klik lingkaran untuk melihat kenangan kita!
        </p>
    </div>
    
    <div class="popup" id="popup">
        <div class="popup-content">
            <div class="photo-container">
                <img id="popup-img" src="" alt="Memory" class="memory-photo">
            </div>
            
            <div class="photo-info">
                <h3 class="photo-title" id="photo-title">Memory #1</h3>
                <p class="photo-desc" id="photo-desc">Ini adalah kenangan indah pertama kita bersama.</p>
                
                <div class="nav-buttons">
                    <button class="nav-btn" onclick="prevPhoto()" id="prev-btn">
                        ‚Üê Previous
                    </button>
                    <span id="photo-counter">1/22</span>
                    <button class="nav-btn" onclick="nextPhoto()" id="next-btn">
                        Next ‚Üí
                    </button>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="close-btn" onclick="closePopup()">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ‚≠ê URL FOTO (dengan parameter width untuk kualitas)
        const memories = [
            { 
                title: "Memory 1", 
                desc: "Kenangan pertama kita yang indah...",
                url: "https://i.ibb.co/2Y7kYpG5/1.jpg?width=800" 
            },
            { 
                title: "Memory 2", 
                desc: "Momen spesial yang tak terlupakan...",
                url: "https://i.ibb.co/Z1gz98WN/2.jpg?width=800" 
            },
            { 
                title: "Memory 3", 
                desc: "Waktu kita tertawa bersama...",
                url: "https://i.ibb.co/5h8xHnYB/3.jpg?width=800" 
            },
            { 
                title: "Memory 4", 
                desc: "Petualangan seru kita...",
                url: "https://i.ibb.co/PzCWkBTD/4.jpg?width=800" 
            },
            { 
                title: "Memory 5", 
                desc: "Hari yang menyenangkan...",
                url: "https://i.ibb.co/nq9Vjjf5/5.jpg?width=800" 
            },
            { 
                title: "Memory 6", 
                desc: "Momen romantic sederhana...",
                url: "https://i.ibb.co/tM6Yb4JY/6.jpg?width=800" 
            },
            { 
                title: "Memory 7", 
                desc: "Mencoba hal baru bersama...",
                url: "https://i.ibb.co/HfctgDDP/7.jpg?width=800" 
            },
            { 
                title: "Memory 8", 
                desc: "Selfie spontan favorit...",
                url: "https://i.ibb.co/Q5nTMng/8.jpg?width=800" 
            },
            { 
                title: "Memory 9", 
                desc: "Celebration kecil kita...",
                url: "https://i.ibb.co/Kx8rNTqH/9.jpg?width=800" 
            },
            { 
                title: "Memory 10", 
                desc: "Di tempat favorite kita...",
                url: "https://i.ibb.co/JwmM4kTZ/10.jpg?width=800" 
            },
            { 
                title: "Memory 11", 
                desc: "Ketika waktu berhenti...",
                url: "https://i.ibb.co/Zp8s6YmP/11.jpg?width=800" 
            },
            { 
                title: "Memory 12", 
                desc: "Momen candid natural...",
                url: "https://i.ibb.co/Gv2tbGJG/12.jpg?width=800" 
            },
            { 
                title: "Memory 13", 
                desc: "Liburan pertama kita...",
                url: "https://i.ibb.co/r8dFnYZ/13.jpg?width=800" 
            },
            { 
                title: "Memory 14", 
                desc: "Hujan yang romantis...",
                url: "https://i.ibb.co/g8xw6Gf/14.jpg?width=800" 
            },
            { 
                title: "Memory 15", 
                desc: "Dengan latar indah...",
                url: "https://i.ibb.co/fVTKNGpY/15.jpg?width=800" 
            },
            { 
                title: "Memory 16", 
                desc: "Makan di restoran baru...",
                url: "https://i.ibb.co/rf44xMBf/16.jpg?width=800" 
            },
            { 
                title: "Memory 17", 
                desc: "Nonton film favorit...",
                url: "https://i.ibb.co/g8xw6Gf/17.jpg?width=800" 
            },
            { 
                title: "Memory 18", 
                desc: "Jalan-jalan sore...",
                url: "https://i.ibb.co/zVk4vk2g/18.jpg?width=800" 
            },
            { 
                title: "Memory 19", 
                desc: "Ekspresi lucu kita...",
                url: "https://i.ibb.co/wFPMBZFV/19.jpg?width=800" 
            },
            { 
                title: "Memory 20", 
                desc: "Sebelum acara spesial...",
                url: "https://i.ibb.co/4ZC9fRG4/20.jpg?width=800" 
            },
            { 
                title: "Memory 21", 
                desc: "Di alam terbuka...",
                url: "https://i.ibb.co/fYW1Tpgz/21.jpg?width=800" 
            },
            { 
                title: "Memory 22", 
                desc: "Foto terbaru kita!",
                url: "https://i.ibb.co/ZpP26mB8/22.jpg?width=800" 
            }
        ];
        
        let collected = 0;
        let currentIndex = 0;
        
        // Create orbs
        const orbsContainer = document.getElementById('orbs');
        for(let i = 0; i < 22; i++) {
            const orb = document.createElement('div');
            orb.className = 'orb';
            orb.textContent = i + 1;
            orb.onclick = () => showPhoto(i);
            orbsContainer.appendChild(orb);
        }
        
        function showPhoto(index) {
            currentIndex = index;
            const memory = memories[index];
            
            const img = document.getElementById('popup-img');
            img.src = memory.url;
            
            // Auto detect portrait/landscape dan apply class
            img.onload = function() {
                if (this.naturalHeight > this.naturalWidth) {
                    this.classList.add('portrait');
                    this.classList.remove('landscape');
                } else {
                    this.classList.add('landscape');
                    this.classList.remove('portrait');
                }
            };
            
            document.getElementById('photo-title').textContent = memory.title;
            document.getElementById('photo-desc').textContent = memory.desc;
            document.getElementById('photo-counter').textContent = `${index + 1}/22`;
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = index === 0;
            document.getElementById('next-btn').disabled = index === 21;
            
            // Show popup
            document.getElementById('popup').style.display = 'flex';
            
            // Mark as collected
            const orb = document.querySelectorAll('.orb')[index];
            if(!orb.classList.contains('collected')) {
                orb.classList.add('collected');
                collected++;
                document.getElementById('count').textContent = collected;
                
                if(collected === 22) {
                    setTimeout(() => {
                        alert('üéâüéâüéâ SELAMAT! Semua 22 kenangan terkumpul!\n\nHappy 22nd Birthday Sayangku! üéÇ‚ù§Ô∏è\nSemoga tahun ini membawa lebih banyak kebahagiaan untuk kita berdua!');
                    }, 500);
                }
            }
        }
        
        function prevPhoto() {
            if (currentIndex > 0) {
                showPhoto(currentIndex - 1);
            }
        }
        
        function nextPhoto() {
            if (currentIndex < 21) {
                showPhoto(currentIndex + 1);
            }
        }
        
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }
        
        // Close popup when clicking outside
        document.getElementById('popup').onclick = function(e) {
            if(e.target === this) closePopup();
        };
        
        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('popup').style.display === 'flex') {
                if (e.key === 'ArrowLeft') prevPhoto();
                if (e.key === 'ArrowRight') nextPhoto();
                if (e.key === 'Escape') closePopup();
            }
        });
        
        console.log('üéÆ Game loaded! Foto akan maintain aspect ratio.');
    </script>
</body>
</html>
